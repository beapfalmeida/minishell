<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>minishell: minishell</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">minishell<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">The MiniShell project aims to develop a simplified UNIX-like shell from scratch, providing students with hands-on experience in system programming, process management, and inter-process communication. The shell will interpret and execute commands entered by the user, mimicking the basic functionality of popular shells like bash</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">minishell</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a></p>
<p style="text-align:center;"></p>
<p>As beautiful as a shell.</p>
<p>The goal of this project is to create a simpler version of a shell, adhering to the Goals and Rules below.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Documentation</h1>
<h1><a class="anchor" id="autotoc_md2"></a>
Project Goals and Rules</h1>
<ul>
<li>Display a prompt while waiting for a new command;</li>
<li>Have a working history;</li>
<li>Search and launch the right executable based on the PATH variable;</li>
<li>Avoid using more than one global variable to indicate received signal (e.g. CTRL-C);</li>
<li>Handle single quotes and double quotes;</li>
<li>Implement redirections:<ul>
<li>&lt; redirects input</li>
<li>&gt; redirects output</li>
<li>&lt;&lt; expects a delimiter, then reads input until line containing delimiter. Doesn't update history.</li>
<li>&gt;&gt; redirects output in append mode;</li>
</ul>
</li>
<li>Handle pipes <code>|</code>;</li>
<li>Handle environment variables, which expand to their values;</li>
<li>Handle <code>$?</code> which expands to exit status of the most recently executed foreground pipeline;</li>
<li>Handle <code>ctrl-C</code>, <code>ctrl-D</code>, <code>ctrl-\</code>;</li>
<li>In interactive mode: <code>ctrl-C</code> displays a new prompt on a new line, <code>ctrl-D</code> exits the shell, <code>ctrl-\</code> does nothing;</li>
<li>Handle the following built-ins:</li>
</ul>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Built-in   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>echo [-n]</code>   </td><td class="markdownTableBodyNone">Displays a line of text\nOptional flag <code>-n</code> does not output trailing line    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>cd [path]</code>   </td><td class="markdownTableBodyNone">Changes working directory, updating <code>PWD</code> and <code>OLDPWD</code> <br  />
 Without arguments it changes to Home Directory    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pwd</code>   </td><td class="markdownTableBodyNone">Shows the current directory as an absolute path.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>export</code>   </td><td class="markdownTableBodyNone">Accepts arguments name[=value] <br  />
 Adds name to the environment. Set's value of name to value. <br  />
 If no argument is given, displays list of exported variables.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unset</code>   </td><td class="markdownTableBodyNone">Accepts argument <code>name</code> removing it from the environment    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>env</code>   </td><td class="markdownTableBodyNone">Displays the env variables    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>exit</code>   </td><td class="markdownTableBodyNone">Terminates the shell   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md3"></a>
Installing and Using</h1>
<p>To download, clone the repository into your device and navigate inside using <code>cd pipex</code>, then typing <code>make</code> to compile all the functions and generate the executable pipex, which you can run as follows:</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Theory</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
Bash vs Terminal vs Command Line vs Prompt</h2>
<p>A terminal emulator is the the terminal window which is a program that runs Bash, zsh,... </p><div class="fragment"><div class="line">jsobreir$ echo $0</div>
<div class="line">/bin/zsh &lt;----- The terminal is running zsh</div>
</div><!-- fragment --><p> The command line is part of the terminal and it refers to the actual interfacce that interprets the commands you write. Bash and zsh are similar but zsh is more costumizable, interactive,... generally has more features.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Basic program</h1>
<div class="fragment"><div class="line">while</div>
<div class="line">{</div>
<div class="line">  print_prompt();</div>
<div class="line">  read_line();</div>
<div class="line">  parse();</div>
<div class="line">  exec();</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md7"></a>
Project Implementation</h1>
<h2><a class="anchor" id="autotoc_md8"></a>
Parser</h2>
<p>The Parser is the software component that reads the command line such as “ls ­al” and puts it into a data structure called Command Table that will store the commands that will be executed. </p>
<h3><a class="anchor" id="autotoc_md9"></a>
Tokens</h3>
<p>The characters in the arguments are converted into words (tokens). </p>
<h3><a class="anchor" id="autotoc_md10"></a>
Command Table</h3>
<p>This is a table of commands containing all the tokens.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Executor</h2>
<p>The executor will take the command table generated by the parser and for every SimpleCommand in the array it will create a new process. It will also if necessary create pipes to communicate the output of one process to the input of the next one. Additionally, it will redirect the standard input, standard output, and standard error if there are any redirections</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Shell subsystems</h2>
<p>These are the subsystems that make executing commands possible:</p><ul>
<li>Environment variables: expressions of the forms ${VAR} are expandend with the corresponding environment variables.</li>
<li>Wildcards: Arguments of the form <code>*</code> are expanded to all the files that match them, in the local directory or multiple directories.</li>
<li>Subshells: Arguments between `` are executed and it's output is sent to the input of the shell.</li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Task List</h1>
<ul class="check">
<li class="checked"><b>Shell Features</b><ul class="check">
<li class="checked"><b>Prompt</b>: Display a shell prompt and await user input.</li>
</ul>
<ul class="check">
<li class="checked"><b>Command History</b>: Implement a command history using <code>readline()</code>.</li>
</ul>
<ul class="check">
<li class="checked"><b>Signal Handling</b>: Properly handle signals (e.g., <code>ctrl-C</code>, <code>ctrl-D</code>, <code>ctrl-\</code>).</li>
</ul>
</li>
<li class="unchecked"><b>Parser</b><ul class="check">
<li class="checked">Implement a <b>Lexer</b> (tokenizer) to separate the input into tokens (commands and arguments).</li>
</ul>
<ul class="check">
<li class="checked">Build the <b>Command Table</b> to store commands and arguments.</li>
</ul>
<ul class="check">
<li class="checked">Implement rules for handling builtins (<code>echo</code>, <code>cd</code>, <code>pwd</code>, etc.) and external commands.</li>
<li class="unchecked">Implement error handling for invalid input. - Bea</li>
</ul>
</li>
</ul>
<ul class="check">
<li class="checked"><b>Built-ins</b><ul class="check">
<li class="checked"><b>echo</b>: Implement with <code>-n</code> option.</li>
</ul>
<ul class="check">
<li class="checked"><b>cd</b>: Implement with relative or absolute path.</li>
</ul>
<ul class="check">
<li class="checked"><b>pwd</b>: Print the current directory.</li>
</ul>
<ul class="check">
<li class="checked"><b>export</b>: Handle environment variable exportation.</li>
</ul>
<ul class="check">
<li class="checked"><b>unset</b>: Remove environment variables.</li>
</ul>
<ul class="check">
<li class="checked"><b>env</b>: Print all environment variables.</li>
</ul>
<ul class="check">
<li class="checked"><b>exit</b>: Exit the shell with a status.</li>
</ul>
</li>
<li class="unchecked"><b>Expanders</b><ul class="check">
<li class="checked"><b>Environment Variables</b>: Expand <code>$VAR</code> expressions.</li>
<li class="unchecked"><b>Handle brackets in expander</b>: single and double and both. - Bea</li>
</ul>
<ul class="check">
<li class="unchecked"><b>Exit Status</b>: Implement <code>$?</code> to hold the exit status of the last executed command. - Bea</li>
</ul>
</li>
</ul>
<ul class="check">
<li class="checked"><b>Executor</b><ul class="check">
<li class="checked">Create child processes using <code>fork()</code> for each command.</li>
</ul>
<ul class="check">
<li class="checked">Use <code>execve()</code> to execute external commands.</li>
</ul>
<ul class="check">
<li class="checked">Implement builtins in the parent process where applicable (<code>cd</code>, <code>export</code>, etc.).</li>
</ul>
<ul class="check">
<li class="checked">Ensure the last child process waits to complete using <code>waitpid()</code>.</li>
</ul>
</li>
<li class="unchecked"><b>Redirections</b><ul class="check">
<li class="checked">Implement input redirection (<code>&lt; infile</code>).</li>
</ul>
<ul class="check">
<li class="checked">Implement output redirection (<code>&gt; outfile</code>).</li>
<li class="unchecked">Skip redirectors and files - Joao</li>
</ul>
<ul class="check">
<li class="checked">Implement append output redirection (<code>&gt;&gt; outfile</code>).</li>
<li class="unchecked">Implement heredoc (<code>&lt;&lt; delimiter</code>). - Joao</li>
</ul>
</li>
</ul>
<ul class="check">
<li class="checked"><b>Pipes</b><ul class="check">
<li class="checked">Implement pipes (<code>|</code>) to connect commands in a pipeline.</li>
</ul>
<ul class="check">
<li class="checked">Redirect stdout of one command to stdin of the next using <code>pipe()</code> and <code>dup2()</code>.</li>
</ul>
</li>
<li class="unchecked"><b>Testing</b><ul class="check">
<li class="unchecked">Create test cases for all possible scenarios, including edge cases.</li>
</ul>
<ul class="check">
<li class="unchecked">Validate memory management using <code>valgrind</code> or similar tools to ensure no memory leaks.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
Links</h1>
<ul>
<li><a href="https://www.markdownguide.org/extended-syntax/">https://www.markdownguide.org/extended-syntax/</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md15"></a>
Disclaimer</h1>
<p>At 42 School our projects have to adhere to the 42 Norm of coding standards and good practices. These include:</p><ul>
<li>Maximum 25 lines per function and 5 functions per file;</li>
<li>No variable declarations and assignments in the same line;</li>
<li>Forbiden structures: <code>for</code>, <code>switch</code>, <code>goto</code> and <code>case</code>;</li>
<li>No more than 5 variables per function.</li>
</ul>
<p>All of my projects strictly adhere to this Norm, that promotes code simplicity and readability. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
